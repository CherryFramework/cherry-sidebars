!function(a){"use strict";var b={submitButton:null,spinner:null,errorMessage:null,form:null,btnNewSidebar:null,btnRemoveSidebar:null,customSidebarHolder1:null,customSidebarHolder2:null,ajaxRequest:null,newSidebarData:{action:"add_new_custom_sidebar",security:window.cherryFramework.ajax_nonce_new_sidebar,formdata:{}},removeSidebarData:{action:"remove_custom_sidebar",id:"",security:window.cherryFramework.ajax_nonce_remove_sidebar},init:function(){var b=this;b.form=a("#cherry-sidebars-form"),b.submitButton=a("#sidebar-manager-submit",b.form),b.spinner=a(".spinner-wordpress-type-1",b.form),b.errorMessage=a("#cherry-error-message",b.form),b.customSidebarHolder1=a("#cherry-sidebars-holder .sidebars-column-1"),b.customSidebarHolder2=a("#cherry-sidebars-holder .sidebars-column-2"),b.btnNewSidebar=a(".btn-create-sidebar.thickbox"),b.btnRemoveSidebar=a(".cherry-delete-sidebar-manager"),b.submitButton.on("click",b.submitByttonHandler),b.btnNewSidebar.on("click",b.openThickBox),b.btnRemoveSidebar.on("click",b.removeCustomSidebar),a.ajaxSetup({type:"GET",url:window.ajaxurl,cache:!1})},openThickBox:function(){a('input[type="text"]',b.form).removeClass("error-invalid")},submitByttonHandler:function(c){var e,f,g,d=b.form.serializeArray();b.errorMessage.css({display:"none"});for(e in d)f=d[e],g=a('input[name="'+f.name+'"]',b.form),f.value?g.removeClass("error-invalid"):g.addClass("error-invalid");return a(".error-invalid",b.form)[0]?b.errorMessage.css({display:"block"}).delay(3e3).fadeOut(800,0):(b.newSidebarData.formdata=d,b.aJaxRequestNewSitebar()),!1},reInitWidgets:function(){a("#widgets-right .sidebar-name").off("click"),a("#widgets-left .sidebar-name").off("click"),a("body").off("click.widgets-toggle"),a(".widgets-chooser").off("click.widgets-chooser").off("keyup.widgets-chooser"),a("#available-widgets .widget .widget-title").off("click.widgets-chooser"),a(".widgets-chooser-sidebars > li").remove(),window.wpWidgets&&(window.wpWidgets.hoveredSidebar=null,window.wpWidgets.init())},aJaxRequestNewSitebar:function(){b.ajaxRequest=a.ajax({data:b.newSidebarData,beforeSend:function(){b.submitButton.attr({disabled:!0}),b.spinner.css({display:"block"}),b.ajaxRequest&&b.ajaxRequest.abort()},success:function(c){var d=a(".widgets-holder-wrap",b.customSidebarHolder1).length,e=a(".widgets-holder-wrap",b.customSidebarHolder2).length,f=a(c);d<=e?b.customSidebarHolder1.append(f):b.customSidebarHolder2.append(f),a(".cherry-delete-sidebar-manager",f).on("click",b.removeCustomSidebar),a('input[type="text"]',b.form).val(""),a(".tb-close-icon").trigger("click"),b.reInitWidgets()},complete:function(){b.spinner.delay(200).css({display:"none"}),b.submitButton.attr({disabled:!1})},error:function(){b.errorMessage.css({display:"block"}).delay(3e3).fadeOut(800,0)}})},removeCustomSidebar:function(){var c=a(this).parents(".cherry-widgets-holder-wrap");b.removeSidebarData.id=a(".widgets-sortables",c).attr("id"),b.requestRemoveSidebar(c)},requestRemoveSidebar:function(c){b.ajaxRequest=a.ajax({data:b.removeSidebarData,beforeSend:function(){a(".cherry-spinner-wordpress",c).css({display:"block"})},success:function(){c.remove(),b.reInitWidgets()}})}};a(document).ready(function(){b.init(),a("body:not(.widgets_access) .sidebar-manager-name").on("click",function(){var b=a(this);a("~ .sidebars-holder",b).toggleClass("closed"),a(".sidebar-name-arrow",b).toggleClass("closed-arrow")})})}(jQuery);
